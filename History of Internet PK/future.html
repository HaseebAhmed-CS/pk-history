<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="referrer" content="no-referrer" />
  <title>Internet in Pakistan — Future</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/nunjucks/3.2.4/nunjucks.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff; --bg-soft:#f6faf8; --ink:#0f1720; --muted:#3b4f45; --border:#e6efe9;
      --green:#10b981; --green-600:#059669; --green-700:#065f46; --cyan:#22eea0;
      --shadow-1:0 2px 6px rgba(16,24,32,.06), 0 10px 28px rgba(16,24,32,.06);
      --shadow-2:0 6px 16px rgba(16,24,32,.08), 0 22px 56px rgba(16,24,32,.12);
      --container:1180px; --r-xl:26px;
      --t1:clamp(1.1rem,1rem + .6vw,1.25rem);
      --t2:clamp(1.35rem,1.1rem + 1.2vw,1.65rem);
      --t3:clamp(1.8rem,1.4rem + 2vw,2.2rem);
      --t4:clamp(2.4rem,1.9rem + 3vw,3.3rem);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;line-height:1.65}
    .container{max-width:var(--container);margin:auto;padding:0 24px}

    .kicker{letter-spacing:.12em;text-transform:uppercase;font-weight:800;color:var(--green-700);font-size:.8rem}
    .chip{display:inline-flex;gap:.45rem;align-items:center;padding:.36rem .7rem;background:#ecfdf5;border:1px solid #d1fae5;color:#065f46;border-radius:999px;font-weight:800;font-size:.78rem}

    /* Sticky subnav */
    .subnav{position:sticky;top:0;z-index:50;background:#ffffffcc;backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--border)}
    .subnav .inner{display:flex;gap:10px;align-items:center;justify-content:center;padding:10px}
    .subnav a{color:#2b6757;text-decoration:none;font-weight:800;padding:.4rem .7rem;border-radius:999px;border:1px solid transparent}
    .subnav a:hover{border-color:#c8eee0;background:#f3fbf7}
    .subnav a.active{border-color:#bfead9;background:#f1fbf6}

    /* Loader */
    .loading{display:flex;min-height:50vh;align-items:center;justify-content:center;flex-direction:column;gap:12px}
    .spinner{width:46px;height:46px;border:3px solid rgba(16,24,32,.08);border-top:3px solid var(--green);border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .loading p{color:#4b6359}

    /* Hero */
    header.hero{position:relative;overflow:hidden;isolation:isolate;background:var(--bg-soft);border-bottom:1px solid var(--border)}
    .flag-bg{position:absolute;inset:0;z-index:-2;opacity:.12;background:url('https://upload.wikimedia.org/wikipedia/commons/3/32/Flag_of_Pakistan.svg') center/cover no-repeat}
    .flag-veil{position:absolute;inset:0;z-index:-1;background:linear-gradient(180deg,rgba(255,255,255,.92),rgba(255,255,255,.98))}
    .hero-inner{padding:64px 0;text-align:center}
    .hero h1{
      margin:.6rem 0 0;font-size:var(--t4);font-weight:900;letter-spacing:-.02em;
      background:linear-gradient(135deg,var(--green),var(--cyan));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent
    }
    .hero p{max-width:880px;margin:12px auto 0;color:#3b5149;font-size:var(--t1)}
    .divider{width:160px;height:4px;margin:16px auto;border-radius:999px;background:linear-gradient(90deg,transparent,var(--green) 22%,var(--cyan) 78%,transparent)}

    /* Sections */
    .section{padding:88px 0 84px}
    .section-header{text-align:center;margin-bottom:34px}
    .section-title{font-size:var(--t3);margin:.15rem 0;letter-spacing:-.015em}
    .section-lead{max-width:840px;margin:8px auto 0;color:#425a52;font-size:var(--t1)}

    /* Metrics */
    .metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-top:20px}
    .metric{text-align:center;background:#fff;border:1px solid var(--border);border-radius:18px;padding:22px 18px;box-shadow:var(--shadow-1)}
    .metric .num{font-family:'JetBrains Mono',monospace;font-weight:900;color:var(--green-700);font-size:1.55rem}
    .metric .lab{color:#46655b;text-transform:uppercase;font-weight:900;letter-spacing:.14em;font-size:.76rem}

    /* Cards grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:22px}
    .card{
      display:grid;grid-template-rows:auto 1fr; /* equal height */
      background:#fff;border:1px solid var(--border);border-radius:22px;
      box-shadow:var(--shadow-1);transition:transform .26s,box-shadow .26s,border-color .26s;overflow:hidden
    }
    .card:hover{transform:translateY(-8px);box-shadow:var(--shadow-2);border-color:#cbeee2}
    .thumb{position:relative;aspect-ratio:16/9;background:linear-gradient(180deg,#f0fdf4,#e6f4f1);overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block;transform:scale(1.03);transition:transform .45s cubic-bezier(.2,.8,.2,1)}
    .card:hover .thumb img{transform:scale(1.06)}
    .thumb::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0) 60%, rgba(0,0,0,.06) 100%)}
    .card-content{padding:18px 18px 20px}
    .card h3{margin:.15rem 0 .4rem;font-weight:900;color:#0f4f41;font-size:1.05rem;line-height:1.25}
    .card p{margin:0;color:#3a5147;line-height:1.55}

    /* Roadmap */
    .roadmap{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px}
    .step{background:#fff;border:1px solid var(--border);border-radius:18px;padding:16px;box-shadow:var(--shadow-1)}
    .step .year{display:inline-block;padding:.2rem .55rem;border-radius:999px;background:#ecfdf5;border:1px solid #d1fae5;color:#065f46;font-size:.85rem;font-family:'JetBrains Mono',monospace;font-weight:900;margin-bottom:6px}
    .step h4{margin:.2rem 0 .4rem;color:#0f4f41;font-weight:800}
    .step p{margin:0;color:#3a5147}

    /* Risks */
    .risk{background:linear-gradient(180deg,#fff,#f6fbf9);border:1px solid var(--border);border-radius:20px;padding:16px;box-shadow:var(--shadow-1)}
    .risk h3{font-size:1.05rem;margin:.1rem 0 .35rem;color:#0f4f41}
    .risk p{margin:0;color:#3a5147}

    /* CTA */
    .cta{text-align:center;background:#fff;border:1px solid var(--border);border-radius:var(--r-xl);box-shadow:var(--shadow-1);padding:28px}
    .cta a{display:inline-block;margin-top:10px;padding:1rem 1.25rem;border-radius:999px;background:linear-gradient(180deg,var(--green),var(--green-600));color:#fff;text-decoration:none;font-weight:900;box-shadow:var(--shadow-1);font-size:.95rem}
    .cta a:hover{transform:translateY(-2px);box-shadow:var(--shadow-2)}

    footer{border-top:1px solid var(--border);background:var(--bg-soft);margin-top:78px}
    .foot{padding:26px 0;text-align:center;color:#3c4e47}
    .foot strong{color:var(--green-700)}

    /* Reveal */
    .reveal{opacity:0;transform:translateY(12px)}
    .reveal.show{opacity:1;transform:translateY(0);transition:opacity .55s ease,transform .55s cubic-bezier(.2,.8,.2,1)}

    @media (max-width:740px){
      .metrics{grid-template-columns:repeat(2,1fr)}
      .hero-inner{padding:52px 0}
    }
  </style>
</head>
<body>
  <nav class="subnav" aria-label="Section navigation">
    <div class="inner">
      <a href="#forecasts">Forecasts</a>
      <a href="#initiatives">Key Tracks</a>
      <a href="#scenarios">Scenarios</a>
      <a href="#roadmap">Roadmap</a>
      <a href="#risks">Risks</a>
    </div>
  </nav>

  <div id="loading" class="loading" role="status" aria-live="polite">
    <div class="spinner" aria-hidden="true"></div>
    <p>Loading what’s next for Pakistan’s internet…</p>
  </div>

  <div id="future-content" hidden></div>

  <!-- TEMPLATE -->
  <script type="text/template" id="future-template">
    <header class="hero">
      <div class="flag-bg" aria-hidden="true"></div>
      <div class="flag-veil" aria-hidden="true"></div>
      <div class="container hero-inner">
        <span class="chip">{{ hero.kicker }}</span>
        <h1>{{ hero.title }}</h1>
        {% if hero.subhead %}<p>{{ hero.subhead }}</p>{% endif %}
        <div class="divider" aria-hidden="true"></div>
      </div>
    </header>

    <main class="container">
      <!-- Forecasts -->
      <section class="section" id="forecasts">
        <div class="section-header">
          <span class="kicker">Forecasts</span>
          <h2 class="section-title">{{ forecasts.title }}</h2>
          {% if forecasts.lead %}<p class="section-lead">{{ forecasts.lead }}</p>{% endif %}
        </div>
        <div class="metrics">
          {% for m in forecasts.items %}
          <div class="metric reveal">
            <div class="num">{{ m.value }}</div>
            <div class="lab">{{ m.label }}</div>
          </div>
          {% endfor %}
        </div>
      </section>

      <!-- Initiatives -->
      <section class="section" id="initiatives">
        <div class="section-header">
          <span class="kicker">Tracks</span>
          <h2 class="section-title">{{ initiatives.title }}</h2>
          {% if initiatives.lead %}<p class="section-lead">{{ initiatives.lead }}</p>{% endif %}
        </div>
        <div class="grid">
          {% for i in initiatives.items %}
          <article class="card reveal">
            {% if i.image %}
            <figure class="thumb">
              <img src="{{ i.image }}" alt="{{ i.title }}" loading="lazy" decoding="async" referrerpolicy="no-referrer" crossorigin="anonymous" />
            </figure>
            {% endif %}
            <div class="card-content">
              <h3>{{ i.title }}</h3>
              <p>{{ i.description }}</p>
            </div>
          </article>
          {% endfor %}
        </div>
      </section>

      <!-- Scenarios -->
      <section class="section" id="scenarios">
        <div class="section-header">
          <span class="kicker">Possible futures</span>
          <h2 class="section-title">{{ scenarios.title }}</h2>
          {% if scenarios.lead %}<p class="section-lead">{{ scenarios.lead }}</p>{% endif %}
        </div>
        <div class="grid">
          {% for s in scenarios.items %}
          <article class="card reveal">
            <div class="card-content">
              <h3>{{ s.name }}</h3>
              <p>{{ s.outlook }}</p>
            </div>
          </article>
          {% endfor %}
        </div>
      </section>

      <!-- Roadmap -->
      <section class="section" id="roadmap">
        <div class="section-header">
          <span class="kicker">Roadmap</span>
          <h2 class="section-title">{{ roadmap.title }}</h2>
          {% if roadmap.lead %}<p class="section-lead">{{ roadmap.lead }}</p>{% endif %}
        </div>
        <div class="roadmap">
          {% for step in roadmap.steps %}
          <div class="step reveal">
            <div class="year">{{ step.year }}</div>
            <h4>{{ step.title }}</h4>
            <p>{{ step.detail }}</p>
          </div>
          {% endfor %}
        </div>
      </section>

      <!-- Risks -->
      <section class="section" id="risks">
        <div class="section-header">
          <span class="kicker">Guardrails</span>
          <h2 class="section-title">{{ risks.title }}</h2>
          {% if risks.lead %}<p class="section-lead">{{ risks.lead }}</p>{% endif %}
        </div>
        <div class="grid">
          {% for r in risks.items %}
          <div class="risk reveal">
            <h3>{{ r.name }}</h3>
            <p>{{ r.mitigation }}</p>
          </div>
          {% endfor %}
        </div>
      </section>

      <!-- CTA -->
      <section class="section">
        <div class="cta reveal">
          <h3>{{ cta.heading }}</h3>
          <p style="color:#3a5147;margin:0">{{ cta.copy }}</p>
          {% if cta.button %}<a href="{{ cta.button.href }}">{{ cta.button.label }}</a>{% endif %}
        </div>
      </section>
    </main>

    <footer>
      <div class="container foot">
        <div><strong>{{ footer.credits }}</strong></div>
        <div>{{ footer.author }}</div>
        <div style="color:#5a6b64;font-size:.9rem">{{ footer.year }}</div>
      </div>
    </footer>
  </script>

  <script>
    nunjucks.configure({ autoescape: true });

    async function loadFuture(){
      const loading = document.getElementById('loading');
      const target  = document.getElementById('future-content');
      const tpl     = document.getElementById('future-template').innerHTML;

      const fallback = {
        hero:{ kicker:"Future", title:"Where Pakistan’s Internet Is Headed", subhead:"5G, fiber, AI and rights frameworks will shape the next decade of participation and growth." },
        forecasts:{ title:"Signals & projections (2026–2030)", lead:"Conservative estimates based on regional trends and current baselines.",
          items:[{value:"+40%",label:"Broadband Subscriptions"},{value:"70%",label:"4G/5G Share of Traffic"},{value:"+2×",label:"Fiber Route‑km"},{value:"$3–5B",label:"Digital Exports/yr"}]
        },
        initiatives:{ title:"Key tracks to unlock value", lead:"Execution across infrastructure, capability and trust.",
          items:[
            { title:"Nationwide Fiber & IXPs", description:"Last‑mile fiber in metros and shared backhaul to tier‑2 cities; local peering to lower latency.", image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRnKqku7e0pAMjTXaRjXDeLz2q4_Sb4GDgH2Q&s" },
            { title:"5G Standalone Pilots", description:"Campus networks, FWA for SMEs and industrial IoT sandboxes in ports and SEZs.", image:"https://images.unsplash.com/photo-1535223289827-42f1e9919769?q=80&w=1200&auto=format&fit=crop" },
            { title:"AI for Public Services", description:"Voice bots for citizen services, OCR for records, and AI triage in tele‑health.", image:"https://images.unsplash.com/photo-1555255707-c07966088b7b?q=80&w=1200&auto=format&fit=crop" },
            { title:"Fintech & Open Payments", description:"Interoperable rails, QR ubiquity and SME credit scoring to lift digital commerce.", image:"https://images.unsplash.com/photo-1563986768609-322da13575f3?q=80&w=1200&auto=format&fit=crop" },
            { title:"Skills & Startup Pipeline", description:"National micro‑credentials, cloud credits and co‑working near campuses.", image:"https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?q=80&w=1200&auto=format&fit=crop" },
            { title:"Rights & Safety by Design", description:"Transparent content rules, due process and data protection to build trust.", image:"https://images.unsplash.com/photo-1544197150-b99a580bb7a8?q=80&w=1200&auto=format&fit=crop" }
          ]
        },
        scenarios:{ title:"Three plausible futures", lead:"Direction hinges on spectrum policy, investment and rights guarantees.",
          items:[
            { name:"Green Sprint", outlook:"Co‑ordinated spectrum + fiber capex; exports hit $5B; costs fall; inclusion expands." },
            { name:"Patchy Progress", outlook:"Selective metros thrive; second‑tier cities lag; affordability pressure persists." },
            { name:"Stalled Momentum", outlook:"Regulatory risk delays 5G/fiber; talent churn rises; platforms de‑prioritize market." }
          ]
        },
        roadmap:{ title:"Near‑term roadmap", lead:"Milestones any coalition (public, private, civil society) can rally around.",
          steps:[
            { year:"2025", title:"Spectrum & Peering", detail:"Finalize spectrum roadmap; expand IXPs in Karachi/Lahore/Islamabad." },
            { year:"2026", title:"Fiber Densification", detail:"Duct sharing policies; metro last‑mile pilots; open‑access wholesale." },
            { year:"2027", title:"5G SA Clusters", detail:"Campus networks in SEZs and ports; FWA for SME corridors." },
            { year:"2028", title:"GovTech at Scale", detail:"AI‑assisted services; one‑stop citizen portals; data registries." }
          ]
        },
        risks:{ title:"Key risks & mitigations", lead:"Build guardrails early to maintain trust and investment.",
          items:[
            { name:"Affordability squeeze", mitigation:"Device financing and targeted data subsidies; promote competition." },
            { name:"Data protection gaps", mitigation:"Pass + enforce DPA with independent oversight and breach notification." },
            { name:"Platform volatility", mitigation:"Interoperable rails and local caching; predictable, consultative rules." },
            { name:"Skills shortage", mitigation:"Micro‑credentials tied to employer demand; remote‑work infrastructure." }
          ]
        },
        cta:{ heading:"Ready to shape the next decade?", copy:"See how today’s choices in policy and infrastructure ripple across jobs, services and rights.", button:{ label:"Back to Impact →", href:"impact.html" } },
        footer:{ credits:"CM1040 Web Development — Internet in Pakistan", author:"Created by Aamir Mustafa · Goldsmiths, University of London", year:"© 2025" }
      };

      try{
        const resp = await fetch('data/future.json', { cache:'no-store' });
        const data = resp.ok ? await resp.json() : fallback;
        render(tpl, data);
      }catch(e){
        console.warn('future.json failed, using fallback:', e);
        render(tpl, fallback);
      }finally{
        document.getElementById('loading').remove();
        document.getElementById('future-content').hidden = false;
        applyReveal();
        setupActiveNav();
      }
    }

    function render(tpl, data){
      document.getElementById('future-content').innerHTML = nunjucks.renderString(tpl, data);
    }

    function applyReveal(){
      const els = document.querySelectorAll('.reveal, .metric, .card, .step, .risk, .cta');
      const io  = new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
          if(en.isIntersecting){ en.target.classList.add('show'); io.unobserve(en.target); }
        });
      }, { threshold:.12, rootMargin:'0px 0px -80px 0px' });
      els.forEach(el=>io.observe(el));
    }

    function setupActiveNav(){
      const links=[...document.querySelectorAll('.subnav a')];
      const targets=links.map(a=>document.querySelector(a.getAttribute('href'))).filter(Boolean);
      const io=new IntersectionObserver(es=>{
        es.forEach(e=>{
          if(e.isIntersecting){
            links.forEach(l=>l.classList.toggle('active', l.getAttribute('href')==='#'+e.target.id));
          }
        });
      },{threshold:.45});
      targets.forEach(t=>io.observe(t));
    }

    document.addEventListener('DOMContentLoaded', loadFuture);

    // Smooth internal links
    document.addEventListener('click', (e)=>{
      const a = e.target.closest("a[href^='#']");
      if(!a) return;
      e.preventDefault();
      document.querySelector(a.getAttribute('href'))?.scrollIntoView({ behavior:'smooth', block:'start' });
    });
  </script>
</body>
</html>
